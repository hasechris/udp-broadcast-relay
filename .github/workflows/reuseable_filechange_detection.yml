---
name: reuseable - check changes in repo

on:
  workflow_call:

jobs:
  filechange_detection:
    runs-on: ubuntu-latest
    container:
      image: alpine:latest
    outputs:
      changes_found_source: ${{ steps.filter.outputs.src }}
      changes_found_workflows: ${{ steps.filter.outputs.workflows }}
    steps:
      - run: apk add --no-cache git
      - uses: actions/checkout@v4
        with:
          fetch-depth: 2
      - run: git config --global --add safe.directory $GITHUB_WORKSPACE
      - run: ls -la
      - uses: dorny/paths-filter@v2
        id: changes
        with:
          filters: |
            src: 
              - 'main.c'
              - 'udp-broadcast-relay.8'
              - 'Makefile'
              - 'ppp-if.up-local'
            workflows:
              - '.github/workflows/*'