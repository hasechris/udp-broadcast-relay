---
name: main - buildtest for manual test or when PR


on:
  workflow_dispatch:
  pull_request: 
    types: opened
    branches: 
      - main
  push:
    branches:
      - dev


jobs:
  build_and_upload:
    uses: ./.github/workflows/reuseable_build_and_upload.yml
    with:
      artifact-name: buildtest
      buildarch_zig: "x86_64"
      zigversion: 0.11.0
  build_container:
    needs: build_and_upload
    #if: github.event_name != 'pull_request' 
    uses: ./.github/workflows/reuseable_build_container.yml
    secrets: inherit
    with:
      artifact-name: buildtest
      buildarch_zig: "x86_64"
      buildarch_buildx: "amd64"

...